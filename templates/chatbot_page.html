<!DOCTYPE html>
<html lang="{{ language }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù…ÙÙ‚ÙˆØ¯Ø§ØªÙŠ - Ø´Ø§Øª Ø¨ÙˆØª</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <script>
    const userLang = "{{ language }}";
    function getLang() {
      return userLang === "ar" ? "ar" : "en";
    }
  </script>

  <style>
  body{
    background-color: #f8f1e9;
      background-image: url('box-background.png');
      background-repeat: no-repeat;
      background-position: center center;
      background-size: cover;
      background-attachment: fixed;
      height: 100vh;
  }
  
     .chat-box-inner {
     display: flex;
     flex-direction: column;
     gap: 10px;
    }

    body {
      background-color: #f8f1e9;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .chat-container {
      max-width: 500px;
      margin: 50px auto;
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
     }
    .chat-box {
      height: 400px;
      overflow-y: auto;
      border: 1px solid #ccc;
      background: #fafafa;
      border-radius: 8px;
      padding: 10px;
    }
    .message {
     padding: 10px 15px;
     border-radius: 20px;
     max-width: 75%;
     word-break: break-word;
     font-size: 16px;
     position: relative;
     margin-bottom: 10px;
     }

     .user-message {
     align-self: flex-end;
     background-color: #d1e7dd;
     margin-right: 10px;
     margin-left: auto;
     text-align: right;
     }

    .bot-message {
     align-self: flex-start;
     background-color: #e2e3e5;
     margin-left: 10px;
     margin-right: auto;
     text-align: left;
    }
    .input-group-text {
      background-color: #2e6048;
      color: white;
      border: none;
      cursor: pointer;
    }
    .btn-primary, .new-chat, .back-top {
      background-color: #2e6048;
      color: white;
      border: none;
      margin-top: 10px;
    }
    .back-top {
      position: absolute;
      top: 10px;
      left: 10px;
      padding: 8px 12px;
      border-radius: 8px;
      text-decoration: none;
      font-size: 14px;
    }
  </style>
</head>

<body>

<a href="/account" class="back-top" id="backButton">Ø±Ø¬ÙˆØ¹</a>

<div class="container">
  <div class="chat-container">
    <h4 class="text-center text-success mb-3" id="chatTitle">ğŸ’¬</h4>
    <div id="chatBox" class="chat-box">
      <div id="chatInner"></div>
    </div>

    <div class="input-group mt-3">
      <input id="userInput" type="text" class="form-control" placeholder="..." aria-label="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ">
      <button class="input-group-text" id="sendButton" onclick="sendMessage()">...</button>
    </div>

    <button class="btn new-chat w-100" id="newChatButton" onclick="newChat()">...</button>
  </div>
</div>

<script src="/static/chatbot.js?v=3"></script>

<script>
window.onload = function() {
  if (getLang() === "ar") {
    document.getElementById("sendButton").innerText = "Ø£Ø±Ø³Ù„";
    document.getElementById("userInput").placeholder = "Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ...";
    document.getElementById("newChatButton").innerText = "Ø¨Ø¯Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø©";
    document.getElementById("chatTitle").innerText = "ğŸ’¬ Ø´Ø§Øª Ø®Ø¯Ù…Ø© Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø§Øª";
    document.getElementById("backButton").innerText = "Ø±Ø¬ÙˆØ¹";
  } else {
    document.getElementById("sendButton").innerText = "Send";
    document.getElementById("userInput").placeholder = "Type your message...";
    document.getElementById("newChatButton").innerText = "Start New Chat";
    document.getElementById("chatTitle").innerText = "ğŸ’¬ Lost & Found Chatbot";
    document.getElementById("backButton").innerText = "Back";
  }
  setTimeout(() => {
    addMessage(getLang() === "ar" ? "ğŸ‘‹ Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ! ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ" : "ğŸ‘‹ Welcome! How can I assist you today?", "bot");
  }, 300);
};
</script>

</body>
</html>
